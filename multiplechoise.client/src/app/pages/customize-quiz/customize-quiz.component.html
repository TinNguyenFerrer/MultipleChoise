<div class="row customize-quiz">
  <div class="col-xxl-5">
    <div
      class="h1 py-4 text-primary-active-color text-center quiz-title"
      [ngClass]="{ 'border-empty-title': (!quiz.title || !quiz.title.trim()) }"
      (click)="isEditing = true"
    >
      <span class="title" *ngIf="!isEditing">
        {{ quiz.title }}
      </span>
      <ng-container *ngIf="isEditing">
        <input
          nbInput
          [(ngModel)]="quiz.title"
          (blur)="isEditing = false"
          (keydown.enter)="isEditing = false"
          fullWidth="true"
          #inputField
          [ngClass]="'w-100'"
          class="col-md-12 col-xxl-5 center-text title"
        />
      </ng-container>
    </div>

    <nb-card class="col-6 col-md-4 rounded">
      <nb-card-body>
        <nb-form-field>
          <label class="label-exam-duration my-text label">Duration (minutes)</label>
          <input nbInput placeholder="Enter duration" type="number" [(ngModel)]="quiz.durationInMinutes" />
        </nb-form-field>
      </nb-card-body>
    </nb-card>

    <nb-card class="mb-4 rounded" *ngFor="let question of quiz.questions">
      <nb-card-body class="customize-quiz-body">
        <nb-icon
          icon="close"
          pack="eva"
          class="delete-question"
          *ngIf="quiz.questions.length > 1"
          (click)="onRemoveQuestion(question)"
        ></nb-icon>
        <div class="row">
          <!-- question -->
          <div class="textarea-wrapper question col-md-12 col-xxl-5 py-3">
            <textarea
              rows="3"
              nbInput
              fullWidth
              shape="round"
              placeholder="Nhập câu hỏi ở đây"
              class="col-md-12 col-xxl-5 pb-3"
              [(ngModel)]="question.content"
            >
            </textarea>
          </div>

          <!-- answers -->
          <div
            class="answer col-md-6 pb-2"
            *ngFor="let answer of question.answers"
          >
            <textarea
              rows="1"
              nbInput
              fullWidth
              shape="round"
              placeholder="Câu trả lời"
              [(ngModel)]="answer.content"
            >
            </textarea>
            <nb-checkbox
              [(ngModel)]="answer.isCorrect"
              (ngModelChange)="onIsCorrectChecked(question, answer)"
            ></nb-checkbox>
            <nb-icon
              icon="close"
              pack="eva"
              class="delete-icon"
              *ngIf="question.answers.length > 1"
              (click)="onRemoveAnswer(question, answer)"
            ></nb-icon>
          </div>

          <div class="w-100"></div>
          <button
            nbButton
            ghost
            status="primary"
            shape="semi-round"
            class="center-item px-4 my-3"
            (click)="onAddAnswer(question)"
          >
            <nb-icon icon="plus-outline" pack="eva"></nb-icon>
            <span>Add answer</span>
          </button>
        </div>
        <div class="d-flex"></div>
      </nb-card-body>
    </nb-card>

    <div class="d-flex flex-row justify-content-between">
      <button
        nbButton
        ghost
        status="primary"
        shape="semi-round"
        class="center-item px-2 mx-0 py-0"
        (click)="onAddQuestion()"
      >
        <nb-icon
          icon="plus-circle"
          pack="eva"
          class="add-question-icon"
        ></nb-icon>
      </button>

      <button nbButton status="success" (click)="onSaveQuiz()">Save</button>
    </div>
  </div>
</div>
